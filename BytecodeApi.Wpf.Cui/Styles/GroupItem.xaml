<ResourceDictionary
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:ui="http://schemas.bytecode77.com/2023/xaml/presentation"
	xmlns:ctrl="clr-namespace:BytecodeApi.Wpf.Cui.Controls"
	xmlns:converter="clr-namespace:BytecodeApi.Wpf.Cui.Converters">
	<Style TargetType="{x:Type GroupItem}">
		<Setter Property="Padding" Value="5,2,0,5" />
		<Setter Property="Foreground" Value="#006bbe" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type GroupItem}">
					<Expander IsExpanded="{Binding ., RelativeSource={RelativeSource TemplatedParent}, Converter={converter:ListViewGroupIsExpandedConverter}}" Padding="{TemplateBinding Padding}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}">
						<Expander.Template>
							<ControlTemplate TargetType="{x:Type Expander}">
								<DockPanel>
									<Border DockPanel.Dock="Top" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}">
										<ToggleButton Name="ToggleButton" IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}" Padding="{TemplateBinding Padding}" Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type GroupItem}}}">
											<ToggleButton.Template>
												<ControlTemplate TargetType="{x:Type ToggleButton}">
													<Border Padding="{TemplateBinding Padding}" Background="Transparent">
														<Grid>
															<Grid.ColumnDefinitions>
																<ColumnDefinition Width="Auto" />
																<ColumnDefinition Width="Auto" />
																<ColumnDefinition Width="*" />
															</Grid.ColumnDefinitions>
															<Grid Width="20" Height="20" Margin="0,0,2,0">
																<Ellipse Name="Circle" Fill="#f0f0f0" Visibility="Collapsed" />
																<Path Name="Arrow" Data="M0,0 L0,2 L4,6 L8,2 L8,0 L4,4 z" HorizontalAlignment="Center" VerticalAlignment="Center" Width="8" Height="6" Fill="{TemplateBinding Foreground}" />
															</Grid>
															<Border Grid.Column="2" Height="1" VerticalAlignment="Center" Margin="5,2,15,0" Background="{TemplateBinding Foreground}" Opacity=".5" />
															<ContentPresenter Grid.Column="1" Content="{Binding Content, RelativeSource={RelativeSource AncestorType={x:Type GroupItem}}}" ContentTemplate="{Binding ContentTemplate, RelativeSource={RelativeSource AncestorType={x:Type GroupItem}}}" ContentStringFormat="{Binding ContentStringFormat, RelativeSource={RelativeSource AncestorType={x:Type GroupItem}}}" TextElement.Foreground="{TemplateBinding Foreground}" VerticalAlignment="Center" Focusable="False" />
														</Grid>
													</Border>
													<ControlTemplate.Triggers>
														<Trigger Property="IsChecked" Value="True">
															<Setter TargetName="Arrow" Property="RenderTransform">
																<Setter.Value>
																	<RotateTransform Angle="180" CenterX="4" CenterY="3" />
																</Setter.Value>
															</Setter>
														</Trigger>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter TargetName="Circle" Property="Visibility" Value="Visible" />
														</Trigger>
														<Trigger Property="IsPressed" Value="True">
															<Setter TargetName="Circle" Property="Fill" Value="#e0e0e0" />
														</Trigger>
													</ControlTemplate.Triggers>
												</ControlTemplate>
											</ToggleButton.Template>
										</ToggleButton>
									</Border>
									<ContentPresenter Name="Content" RecognizesAccessKey="True" SnapsToDevicePixels="True" />
								</DockPanel>
								<ControlTemplate.Triggers>
									<Trigger Property="IsExpanded" Value="False">
										<Setter TargetName="Content" Property="Visibility" Value="Collapsed" />
									</Trigger>
									<Trigger Property="IsEnabled" Value="False">
										<Setter Property="Foreground" Value="#757575" />
										<Setter TargetName="Content" Property="TextElement.Foreground" Value="#757575" />
										<Setter TargetName="ToggleButton" Property="Foreground" Value="#757575" />
									</Trigger>
								</ControlTemplate.Triggers>
							</ControlTemplate>
						</Expander.Template>
						<ItemsPresenter />
					</Expander>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
</ResourceDictionary>